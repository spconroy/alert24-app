(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{20507:function(e,t,i){Promise.resolve().then(i.t.bind(i,47960,23)),Promise.resolve().then(i.bind(i,5052)),Promise.resolve().then(i.bind(i,66181)),Promise.resolve().then(i.bind(i,91718)),Promise.resolve().then(i.t.bind(i,19957,23)),Promise.resolve().then(i.t.bind(i,92602,23))},5052:function(e,t,i){"use strict";i.d(t,{default:function(){return z}});var n=i(57437),o=i(2265),a=i(43209),l=i(49715),r=i(73985),s=i(90658),c=i(77639),u=i(66825),d=i(33101),f=i(61888),g=i(67939),h=i(77824),p=i(50793),m=i(75263),x=i(38543),D=i(95386),v=i(57882),y=i(663),j=i(20844),b=i(40196),C=i(27648),S=i(99376);function z(){let[e,t]=(0,o.useState)(!1),i=(0,S.usePathname)(),z=i.includes("/incidents")?{title:"\uD83D\uDEA8 Incident Management Help",description:"Learn how to manage incidents effectively",quickTips:["Use clear, descriptive titles for incidents","Update status regularly to keep stakeholders informed","Escalate quickly if resolution time exceeds SLA","Add timeline updates for post-incident reviews"],guides:[{title:"Creating Incidents",section:"incidents"},{title:"Escalation Policies",section:"escalation"}]}:i.includes("/monitoring")?{title:"\uD83D\uDCE1 Monitoring Setup Help",description:"Set up monitoring checks to detect issues early",quickTips:["Monitor critical user journeys, not just infrastructure","Use realistic response time thresholds","Set up checks from multiple global locations","Test your monitoring configuration regularly"],guides:[{title:"Monitoring Setup",section:"monitoring"}]}:i.includes("/on-call")?{title:"\uD83D\uDC65 On-Call Schedule Help",description:"Manage team rotations and ensure 24/7 coverage",quickTips:["Add team members to the rotation using the search dropdown","The first person added will be on-call when schedule starts","Remove and re-add people to change rotation order","Make sure team members are in your organization first"],guides:[{title:"On-Call Schedules",section:"on-call"}]}:i.includes("/escalation-policies")?{title:"\uD83D\uDCC8 Escalation Policy Help",description:"Configure automated escalation rules",quickTips:["Start with the on-call person, then escalate to managers","Use realistic timeframes (don't escalate too quickly)","Include multiple contact methods for critical alerts","Test escalation paths regularly"],guides:[{title:"Escalation Policies",section:"escalation"}]}:i.includes("/profile")?{title:"\uD83D\uDC64 Profile Management Help",description:"Manage your account information and notification preferences",quickTips:['Click "Edit Profile" to modify your information',"Add a phone number to enable SMS notifications","Set your timezone for accurate timestamps","Configure notification preferences for optimal alerting","SMS notifications require a valid phone number format"],guides:[{title:"Profile Settings",section:"profile"}]}:{title:"\uD83D\uDE80 Getting Started Help",description:"Welcome to Alert24! Here are some quick tips",quickTips:["Create your first monitoring check to watch your services","Set up an on-call schedule to ensure incident response","Configure escalation policies for automatic notifications","Build status pages to communicate with your users"],guides:[{title:"Getting Started",section:"getting-started"},{title:"Full Help Center",section:"all"}]};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{color:"primary","aria-label":"help",onClick:()=>t(!0),sx:{position:"fixed",bottom:24,right:24,zIndex:1e3,"&:hover":{transform:"scale(1.1)"}},children:(0,n.jsx)(v.Z,{})}),(0,n.jsxs)(l.Z,{open:e,onClose:()=>t(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,minHeight:"400px"}},children:[(0,n.jsxs)(r.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,n.jsx)(s.Z,{variant:"h5",sx:{fontWeight:"bold"},children:z.title}),(0,n.jsx)(c.Z,{onClick:()=>t(!1),color:"inherit",size:"small",sx:{minWidth:"auto",p:1},children:(0,n.jsx)(y.Z,{})})]}),(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(d.Z,{severity:"info",sx:{mb:3},children:z.description}),(0,n.jsxs)(s.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,mt:2},children:[(0,n.jsx)(j.Z,{color:"warning"}),"Quick Tips for This Page"]}),(0,n.jsx)(f.Z,{dense:!0,children:z.quickTips.map((e,t)=>(0,n.jsxs)(g.ZP,{children:[(0,n.jsx)(h.Z,{children:(0,n.jsx)(p.Z,{label:t+1,size:"small",color:"primary"})}),(0,n.jsx)(m.Z,{primary:e,primaryTypographyProps:{variant:"body2"}})]},t))}),(0,n.jsxs)(s.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,mt:3},children:[(0,n.jsx)(b.Z,{color:"primary"}),"Related Guides"]}),(0,n.jsx)(x.Z,{display:"flex",flexDirection:"column",gap:1,children:z.guides.map((e,i)=>(0,n.jsxs)(c.Z,{variant:"outlined",component:C.default,href:"all"===e.section?"/help":"/help#".concat(e.section),onClick:()=>t(!1),sx:{justifyContent:"flex-start"},children:["\uD83D\uDCD6 ",e.title]},i))})]}),(0,n.jsx)(D.Z,{sx:{px:3,pb:3},children:(0,n.jsx)(c.Z,{variant:"contained",component:C.default,href:"/help",onClick:()=>t(!1),fullWidth:!0,children:"\uD83D\uDCDA Open Full Help Center"})})]})]})}},66181:function(e,t,i){"use strict";i.d(t,{default:function(){return b}});var n=i(57437),o=i(2265),a=i(89083),l=i(55666),r=i(90658),s=i(77639),c=i(52854),u=i(38543),d=i(22347),f=i(9391),g=i(73088),h=i(95280),p=i(793),m=i(18150),x=i(58609),D=i(77203),v=i(27648),y=i(99376),j=i(44812);function b(){var e,t,i,b;let C=(0,y.usePathname)(),{selectedOrganization:S,organizations:z,loading:k,selectOrganization:Z,session:w}=(0,j.o)(),[E,I]=(0,o.useState)(null),[O,P]=(0,o.useState)(!1);(0,o.useEffect)(()=>{w&&M()},[w]);let M=async()=>{try{let e=await fetch("/api/user/default-organization");if(e.ok){let t=await e.json();t.hasDefault&&I(t.defaultOrganization.id)}}catch(e){console.error("Error fetching default organization:",e)}},T=async(e,t)=>{if(!O){P(!0);try{if(t){if((await fetch("/api/user/default-organization",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:e})})).ok){I(e);let t=z.find(t=>t.id===e);t&&Z(t),window.location.reload()}else console.error("Failed to set default organization")}else(await fetch("/api/user/default-organization",{method:"DELETE"})).ok?I(null):console.error("Failed to remove default organization")}catch(e){console.error("Error setting default organization:",e)}finally{P(!1)}}},A=e=>"/"===e?"/"===C:C.startsWith(e);return(0,n.jsx)(a.Z,{position:"static",color:"default",elevation:1,children:(0,n.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",gap:2},children:[(0,n.jsx)(r.Z,{variant:"h6",component:v.default,href:"/",sx:{textDecoration:"none",color:"inherit",cursor:"pointer",fontWeight:"bold","&:hover":{opacity:.8}},children:"Alert24"}),w&&(0,n.jsx)(u.Z,{display:"flex",alignItems:"center",gap:1,sx:{flexGrow:1,justifyContent:"center","@media (max-width: 768px)":{display:"none"}},children:[{label:"Dashboard",href:"/",icon:"\uD83D\uDCCA"},{label:"Incidents",href:"/incidents",icon:"\uD83D\uDEA8"},{label:"Monitoring",href:"/monitoring",icon:"\uD83D\uDCE1"},{label:"On-Call",href:"/on-call",icon:"\uD83D\uDC65"},{label:"Status Pages",href:"/status-pages",icon:"\uD83D\uDCC4"},{label:"Settings",href:"/settings",icon:"⚙️"},{label:"Help",href:"/help",icon:"\uD83D\uDCDA"}].map(e=>(0,n.jsxs)(s.Z,{component:v.default,href:e.href,variant:A(e.href)?"contained":"text",color:A(e.href)?"primary":"inherit",size:"small",sx:{minWidth:"auto",px:2,py:1,fontSize:"0.75rem",fontWeight:A(e.href)?600:400,"&:hover":{backgroundColor:A(e.href)?"primary.dark":"rgba(0, 0, 0, 0.04)"}},children:[(0,n.jsx)("span",{style:{marginRight:"6px"},children:e.icon}),e.label]},e.href))}),w&&z.length>0&&(0,n.jsx)(u.Z,{sx:{minWidth:200},children:(0,n.jsxs)(d.Z,{fullWidth:!0,size:"small",variant:"outlined",children:[(0,n.jsx)(f.Z,{children:"Organization"}),(0,n.jsx)(g.Z,{value:(null==S?void 0:S.id)||"",label:"Organization",onChange:e=>{Z(z.find(t=>t.id===e.target.value))},disabled:k,sx:{backgroundColor:"background.paper","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}},children:z.map(e=>{let t=E===e.id;return(0,n.jsx)(h.Z,{value:e.id,children:(0,n.jsxs)(u.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)(u.Z,{display:"flex",alignItems:"center",gap:1,children:["\uD83C\uDFE2 ",e.name]}),(0,n.jsx)(m.Z,{title:t?"Remove as default":"Set as default",children:(0,n.jsx)(p.Z,{size:"small",checked:t,disabled:O,icon:(0,n.jsx)(D.Z,{fontSize:"small"}),checkedIcon:(0,n.jsx)(x.Z,{fontSize:"small"}),onChange:t=>{t.stopPropagation(),T(e.id,t.target.checked)},sx:{color:"primary.main","&.Mui-checked":{color:"primary.main"}}})})]})},e.id)})})]})}),(0,n.jsx)(u.Z,{display:"flex",alignItems:"center",gap:2,children:w?(0,n.jsxs)(u.Z,{display:"flex",alignItems:"center",gap:2,children:[(0,n.jsxs)(u.Z,{display:"flex",alignItems:"center",gap:1,component:v.default,href:"/profile",sx:{textDecoration:"none",color:"inherit",cursor:"pointer",padding:"4px 8px",borderRadius:1,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,n.jsx)(c.Z,{src:null===(e=w.user)||void 0===e?void 0:e.image,alt:null===(t=w.user)||void 0===t?void 0:t.name,sx:{width:32,height:32}}),(0,n.jsx)(r.Z,{variant:"body2",sx:{display:{xs:"none",sm:"block"},maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(null===(i=w.user)||void 0===i?void 0:i.name)||(null===(b=w.user)||void 0===b?void 0:b.email)})]}),(0,n.jsx)(s.Z,{color:"secondary",variant:"outlined",size:"small",onClick:()=>window.location.href="/api/auth/signout",children:"Sign out"})]}):null})]})})}},91718:function(e,t,i){"use strict";i.d(t,{default:function(){return c}});var n=i(57437),o=i(44366),a=i(11588),l=i(20121),r=i(44812);let s=(0,o.Z)({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}}});function c(e){let{children:t}=e;return(0,n.jsxs)(a.Z,{theme:s,children:[(0,n.jsx)(l.ZP,{}),(0,n.jsx)(r.f,{children:t})]})}},44812:function(e,t,i){"use strict";i.d(t,{f:function(){return s},o:function(){return c}});var n=i(57437),o=i(2265);let a=(0,o.createContext)(),l=()=>{try{if(window.localStorage)return localStorage.getItem("selectedOrganizationId")}catch(e){console.warn("Failed to read from localStorage:",e)}return null},r=e=>{try{if(window.localStorage){if(e)return localStorage.setItem("selectedOrganizationId",e),console.log("✅ Saved to localStorage:",e),!0;return localStorage.removeItem("selectedOrganizationId"),console.log("\uD83D\uDDD1️ Removed from localStorage"),!0}}catch(e){console.warn("Failed to write to localStorage:",e)}return!1};function s(e){let{children:t}=e,{data:i,status:s}=function(){let[e,t]=(0,o.useState)(null),[i,n]=(0,o.useState)("loading");return(0,o.useEffect)(()=>{let e=async()=>{try{n("loading");let e=await fetch("/api/auth/session");if(e.ok){let i=await e.json();t(i),n(i?"authenticated":"unauthenticated")}else t(null),n("unauthenticated")}catch(e){console.error("Error fetching session:",e),t(null),n("unauthenticated")}};e();let i=setInterval(e,3e5);return()=>clearInterval(i)},[]),{data:e,status:i}}(),[c,u]=(0,o.useState)(null),[d,f]=(0,o.useState)([]),[g,h]=(0,o.useState)(!1),[p,m]=(0,o.useState)(null),[x,D]=(0,o.useState)(!1);(0,o.useEffect)(()=>{D(!0)},[]),(0,o.useEffect)(()=>{if(x&&d.length>0&&!c){console.log("\uD83D\uDD0D Client-side restoration check...");let e=l();if(e){let t=d.find(t=>t.id===e);t?(console.log("\uD83D\uDD04 Client-side restoration successful:",t.name),u(t)):(console.log("⚠️ Saved organization no longer available, clearing storage"),r(null))}}},[x,d,c]),(0,o.useEffect)(()=>{var e;console.log("\uD83D\uDD04 OrganizationContext:",(null==i?void 0:null===(e=i.user)||void 0===e?void 0:e.email)||"no session","[".concat(s,"]")),i&&"authenticated"===s?v():"unauthenticated"===s&&(console.log("\uD83D\uDEAA User logged out - clearing organizations"),f([]),u(null),r(null))},[i,s]);let v=async()=>{try{h(!0),m(null);let e=await fetch("/api/organizations");if(e.ok){let t=(await e.json()).organizations||[];f(t);let i=null,n=l();if(console.log("\uD83D\uDD0D Checking localStorage for saved organization:",n),n&&((i=t.find(e=>e.id===n))?console.log("\uD83C\uDFAF Found matching organization for restoration:",i.name):(console.log("⚠️ Saved organization ID not found in current organizations, clearing localStorage"),r(null))),!i&&t.length>1){console.log("\uD83D\uDD0D Checking for default organization...");try{let e=await fetch("/api/user/default-organization");if(e.ok){let n=await e.json();if(n.hasDefault){let e=t.find(e=>e.id===n.defaultOrganization.id);e&&(i=e,console.log("⭐ Found default organization:",e.name))}}}catch(e){console.error("Error fetching default organization:",e)}}if(i)console.log("✅ Selected organization:",i.name),u(i),r(i.id);else if(1===t.length){let e=t[0];console.log("\uD83D\uDD04 Auto-selecting single organization:",e.name),u(e),r(e.id)}else 0===t.length?(console.log("\uD83D\uDCED No organizations available"),u(null)):console.log("\uD83E\uDD14 Multiple organizations available, waiting for user selection")}else console.error("Failed to fetch organizations:",e.status,e.statusText),m("Failed to fetch organizations"),f([])}catch(e){console.error("Error fetching organizations:",e),m(e.message),f([])}finally{h(!1)}};return(0,n.jsx)(a.Provider,{value:{selectedOrganization:c,organizations:d,loading:g,error:p,selectOrganization:e=>{console.log("\uD83D\uDCBE Selecting organization:",(null==e?void 0:e.name)||"none"),u(e),r((null==e?void 0:e.id)||null)},refreshOrganizations:v,session:i,sessionStatus:s},children:t})}function c(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useOrganization must be used within an OrganizationProvider");return e}},47960:function(){}},function(e){e.O(0,[4446,702,7639,7863,3744,793,8129,7286,4045,8150,9815,3625,9234,2971,7466,1744],function(){return e(e.s=20507)}),_N_E=e.O()}]);