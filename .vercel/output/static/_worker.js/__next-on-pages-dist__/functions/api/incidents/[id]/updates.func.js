var Q=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var ee=Object.prototype.hasOwnProperty;var te=(k,P)=>()=>(k&&(P=k(k=0)),P);var G=(k,P,L,$)=>{if(P&&typeof P=="object"||typeof P=="function")for(let _ of Z(P))!ee.call(k,_)&&_!==L&&Q(k,_,{get:()=>P[_],enumerable:!($=Y(P,_))||$.enumerable});return k},H=(k,P,L)=>(G(k,P,"default"),L&&G(L,P,"default"));var ne=k=>G(Q({},"__esModule",{value:!0}),k);var q={};import*as Ot from"async_hooks";var W=te(()=>{H(q,Ot)});import{__getNamedExports as se}from"../../../../../__next-on-pages-dist__/webpack/aa5c0a3237ae1fd635b2d0bab25b6e94.js";import{__getNamedExports as re}from"../../../../../__next-on-pages-dist__/webpack/ac7e0cd817c0f96ac6506045b651299a.js";import{__getNamedExports as ae}from"../../../../../__next-on-pages-dist__/webpack/5c7c089f9b18fab21905bdbf6a451f6c.js";import{__getNamedExports as ie}from"../../../../../__next-on-pages-dist__/webpack/fc1dd92f63cefab5577162dd844679df.js";import{__getNamedExports as ue}from"../../../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var j=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/incidents/[id]/updates"),J=se(j,j,j),oe=J.__chunk_6095,ce=J.__chunk_3543,he=J.__chunk_2641,g=re(j,j,j),de=g.__chunk_6195,_e=g.__chunk_2067,le=g.__chunk_9182,pe=g.__chunk_8983,ge=g.__chunk_5228,fe=g.__chunk_2296,me=g.__chunk_2594,ke=g.__chunk_6735,xe=g.__chunk_8219,ye=g.__chunk_5577,Pe=g.__chunk_9254,$e=g.__chunk_9206,be=g.__chunk_989,ve=g.__chunk_1863,we=g.__chunk_3039,Ee=g.__chunk_335,je=g.__chunk_8042,Oe=g.__chunk_7765,Re=g.__chunk_6991,Ae=g.__chunk_8816,Ne=g.__chunk_6631,Ie=g.__chunk_4828,Te=g.__chunk_4834,Se=g.__chunk_828,Ce=g.__chunk_5927,Me=g.__chunk_8439,Ue=g.__chunk_4363,Ke=g.__chunk_2039,De=g.__chunk_8264,Fe=g.__chunk_1583,Be=g.__chunk_7908,Le=g.__chunk_8949,qe=g.__chunk_796,ze=g.__chunk_1651,Ge=g.__chunk_5105,He=g.__chunk_9642,Je=g.__chunk_5028,Xe=g.__chunk_9548,Qe=g.__chunk_6914,We=g.__chunk_7960,Ve=g.__chunk_4337,Ye=g.__chunk_8819,B=ae(j,j,j),Ze=B.__chunk_6006,et=B.__chunk_9985,tt=B.__chunk_4155,nt=B.__chunk_9037,st=B.__chunk_5737,rt=B.__chunk_4919,at=B.__chunk_6855,it=B.__chunk_3607,O=ie(j,j,j),ut=O.__chunk_1730,ot=O.__chunk_3818,ct=O.__chunk_7037,ht=O.__chunk_9573,dt=O.__chunk_7701,_t=O.__chunk_662,lt=O.__chunk_4101,pt=O.__chunk_6776,gt=O.__chunk_3665,ft=O.__chunk_7444,mt=O.__chunk_4591,kt=O.__chunk_7983,xt=O.__chunk_581,yt=O.__chunk_2561,Pt=O.__chunk_2988,$t=O.__chunk_6947,bt=O.__chunk_5996,vt=O.__chunk_676,V=ue(j,j,j),wt=V.__NEXT_FONT_MANIFEST,Et=V.__REACT_LOADABLE_MANIFEST,St=((k,P,L)=>(P._ENTRIES={},k.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-ba48b7ef278912ed.js","static/chunks/fd9d1056-30de07f4a3c346ee.js","static/chunks/7466-8fdf295a7c02cf2e.js","static/chunks/main-app-8eaf6dc4ad0df15d.js"],pages:{"/_app":["static/chunks/webpack-ba48b7ef278912ed.js","static/chunks/framework-8e0e0f4a6b83a956.js","static/chunks/main-17007a384daea84e.js","static/chunks/pages/_app-3c9ca398d360b709.js"],"/_error":["static/chunks/webpack-ba48b7ef278912ed.js","static/chunks/framework-8e0e0f4a6b83a956.js","static/chunks/main-17007a384daea84e.js","static/chunks/pages/_error-cf5ca766ac8f493f.js"]},ampFirstPages:[]},k.__BUILD_MANIFEST.lowPriorityFiles=["/static/5vAXtrh2qjJDoCjPjRb93/_buildManifest.js",,"/static/5vAXtrh2qjJDoCjPjRb93/_ssgManifest.js"],k.__REACT_LOADABLE_MANIFEST=Et,k.__NEXT_FONT_MANIFEST=wt,k.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var $={},_={};function u(i){var h=_[i];if(h!==void 0)return h.exports;var o=_[i]={exports:{}},d=!0;try{$[i].call(o.exports,o,o.exports,u),d=!1}finally{d&&delete _[i]}return o.exports}u.m=$,u.amdO={},(()=>{var i=[];u.O=(h,o,d,t)=>{if(o){t=t||0;for(var e=i.length;e>0&&i[e-1][2]>t;e--)i[e]=i[e-1];i[e]=[o,d,t];return}for(var n=1/0,e=0;e<i.length;e++){for(var[o,d,t]=i[e],r=!0,a=0;a<o.length;a++)n>=t&&Object.keys(u.O).every(A=>u.O[A](o[a]))?o.splice(a--,1):(r=!1,t<n&&(n=t));if(r){i.splice(e--,1);var p=d();p!==void 0&&(h=p)}}return h}})(),u.n=i=>{var h=i&&i.__esModule?()=>i.default:()=>i;return u.d(h,{a:h}),h},(()=>{var i,h=Object.getPrototypeOf?o=>Object.getPrototypeOf(o):o=>o.__proto__;u.t=function(o,d){if(1&d&&(o=this(o)),8&d||typeof o=="object"&&o&&(4&d&&o.__esModule||16&d&&typeof o.then=="function"))return o;var t=Object.create(null);u.r(t);var e={};i=i||[null,h({}),h([]),h(h)];for(var n=2&d&&o;typeof n=="object"&&!~i.indexOf(n);n=h(n))Object.getOwnPropertyNames(n).forEach(r=>e[r]=()=>o[r]);return e.default=()=>o,u.d(t,e),t}})(),u.d=(i,h)=>{for(var o in h)u.o(h,o)&&!u.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:h[o]})},u.e=()=>Promise.resolve(),u.g=function(){if(typeof P=="object")return P;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),u.o=(i,h)=>Object.prototype.hasOwnProperty.call(i,h),u.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},(()=>{var i={5993:0};u.O.j=d=>i[d]===0;var h=(d,t)=>{var e,n,[r,a,p]=t,m=0;if(r.some(x=>i[x]!==0)){for(e in a)u.o(a,e)&&(u.m[e]=a[e]);if(p)var y=p(u)}for(d&&d(t);m<r.length;m++)n=r[m],u.o(i,n)&&i[n]&&i[n][0](),i[n]=0;return u.O(y)},o=k.webpackChunk_N_E=k.webpackChunk_N_E||[];o.forEach(h.bind(null,0)),o.push=h.bind(null,o.push.bind(o))})()})(),(k.webpackChunk_N_E=k.webpackChunk_N_E||[]).push([[2720],{8819:Ye,4337:Ve,7960:We,6914:Qe,9548:Xe,5028:Je,9642:He,5105:Ge,1651:ze,796:qe,8949:Le,7908:Be,1583:Fe,8264:De,2039:Ke,4363:Ue,8439:Me,5927:Ce,828:Se,4834:Te,4828:Ie,6631:Ne,8816:Ae,6991:Re,7765:Oe,8042:je,335:Ee,3039:we,1863:ve,989:be,9206:$e,9254:Pe,5577:ye,8219:xe,6735:ke,2594:me,2296:fe,5228:ge,8983:pe,9182:le}]),(k.webpackChunk_N_E=k.webpackChunk_N_E||[]).push([[7883],{676:vt,5996:bt,6947:$t,2988:Pt,2561:yt,581:xt,7983:kt,4591:mt,7444:ft,3665:gt,6776:pt,4101:lt,662:_t,7701:dt,9573:ht,7037:ct,3818:ot,1730:ut}]),(k.webpackChunk_N_E=k.webpackChunk_N_E||[]).push([[1377],{3607:it,4953:function($,_,u){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_,"__esModule",{value:!0});let h=i(u(3607)),o=i(u(6855));class d{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=h.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var p,m,y;let x=null,v=null,A=null,N=a.status,w=a.statusText;if(a.ok){if(this.method!=="HEAD"){let D=await a.text();D===""||(v=this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?D:JSON.parse(D))}let C=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),K=(m=a.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");C&&K&&K.length>1&&(A=parseInt(K[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(x={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,A=null,N=406,w="Not Acceptable"):v=v.length===1?v[0]:null)}else{let C=await a.text();try{x=JSON.parse(C),Array.isArray(x)&&a.status===404&&(v=[],x=null,N=200,w="OK")}catch{a.status===404&&C===""?(N=204,w="No Content"):x={message:C}}if(x&&this.isMaybeSingle&&((y=x?.details)===null||y===void 0?void 0:y.includes("0 rows"))&&(x=null,N=200,w="OK"),x&&this.shouldThrowOnError)throw new o.default(x)}return{error:x,data:v,count:A,status:N,statusText:w}});return this.shouldThrowOnError||(r=r.catch(a=>{var p,m,y;return{error:{message:`${(p=a?.name)!==null&&p!==void 0?p:"FetchError"}: ${a?.message}`,details:`${(m=a?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(y=a?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,n)}returns(){return this}overrideTypes(){return this}}_.default=d},4708:function($,_,u){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_,"__esModule",{value:!0});let h=i(u(3449)),o=i(u(5245)),d=u(4919);class t{constructor(n,{headers:r={},schema:a,fetch:p}={}){this.url=n,this.headers=Object.assign(Object.assign({},d.DEFAULT_HEADERS),r),this.schemaName=a,this.fetch=p}from(n){let r=new URL(`${this.url}/${n}`);return new h.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new t(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:a=!1,get:p=!1,count:m}={}){let y,x,v=new URL(`${this.url}/rpc/${n}`);a||p?(y=a?"HEAD":"GET",Object.entries(r).filter(([N,w])=>w!==void 0).map(([N,w])=>[N,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([N,w])=>{v.searchParams.append(N,w)})):(y="POST",x=r);let A=Object.assign({},this.headers);return m&&(A.Prefer=`count=${m}`),new o.default({method:y,url:v,headers:A,schema:this.schemaName,body:x,fetch:this.fetch,allowEmpty:!1})}}_.default=t},6855:at,5245:function($,_,u){"use strict";var i=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(_,"__esModule",{value:!0});let h=i(u(1560));class o extends h.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let n=Array.from(new Set(e)).map(r=>typeof r=="string"&&RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");let p=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${p}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}}_.default=o},3449:function($,_,u){"use strict";var i=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(_,"__esModule",{value:!0});let h=i(u(5245));class o{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=e,this.schema=n,this.fetch=r}select(t,{head:e=!1,count:n}={}){let r=!1,a=(t??"*").split("").map(p=>/\s/.test(p)&&!r?"":(p==='"'&&(r=!r),p)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new h.default({method:e?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:n=!0}={}){let r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(t)){let a=t.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(a.length>0){let p=[...new Set(a)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new h.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){let p=[`resolution=${n?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&p.push(this.headers.Prefer),r&&p.push(`count=${r}`),a||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(t)){let m=t.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(m.length>0){let y=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new h.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),e&&n.push(`count=${e}`),this.headers.Prefer=n.join(","),new h.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e=[];return t&&e.push(`count=${t}`),this.headers.Prefer&&e.unshift(this.headers.Prefer),this.headers.Prefer=e.join(","),new h.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}_.default=o},1560:function($,_,u){"use strict";var i=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(_,"__esModule",{value:!0});let h=i(u(4953));class o extends h.default{select(t){let e=!1,n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){let p=a?`${a}.order`:"order",m=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${m?`${m},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){let r=n===void 0?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){let a=r===void 0?"offset":`${r}.offset`,p=r===void 0?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(p,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:p="text"}={}){var m;let y=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),x=(m=this.headers.Accept)!==null&&m!==void 0?m:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${x}"; options=${y};`,this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}_.default=o},4919:rt,7483:function($,_,u){"use strict";var i=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_,"__esModule",{value:!0}),_.PostgrestError=_.PostgrestBuilder=_.PostgrestTransformBuilder=_.PostgrestFilterBuilder=_.PostgrestQueryBuilder=_.PostgrestClient=void 0;let h=i(u(4708));_.PostgrestClient=h.default;let o=i(u(3449));_.PostgrestQueryBuilder=o.default;let d=i(u(5245));_.PostgrestFilterBuilder=d.default;let t=i(u(1560));_.PostgrestTransformBuilder=t.default;let e=i(u(4953));_.PostgrestBuilder=e.default;let n=i(u(6855));_.PostgrestError=n.default,_.default={PostgrestClient:h.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:d.default,PostgrestTransformBuilder:t.default,PostgrestBuilder:e.default,PostgrestError:n.default}},5737:st,9037:nt,4155:tt,9985:et}]),(k.webpackChunk_N_E=k.webpackChunk_N_E||[]).push([[3452],{2641:he,3543:ce}]),(k.webpackChunk_N_E=k.webpackChunk_N_E||[]).push([[6006],{6006:Ze}]),(k.webpackChunk_N_E=k.webpackChunk_N_E||[]).push([[2099],{2067:_e,6195:de,3849:($,_,u)=>{"use strict";u.r(_),u.d(_,{ComponentMod:()=>z,default:()=>F});var i={};u.r(i),u.d(i,{DELETE:()=>v,GET:()=>m,POST:()=>y,PUT:()=>x,runtime:()=>p});var h={};u.r(h),u.d(h,{originalPathname:()=>K,patchFetch:()=>D,requestAsyncStorage:()=>N,routeModule:()=>A,serverHooks:()=>C,staticGenerationAsyncStorage:()=>w});var o=u(7983),d=u(2561),t=u(4828),e=u(6631),n=u(9985),r=u(6095);let a=new(u(6006))._,p="edge";async function m(M,{params:R}){try{let s=await(0,r.I8)();if(!s||!s.user?.email)return n.xk.json({error:"Unauthorized"},{status:401});let{id:f}=R;if(!f)return n.xk.json({error:"Incident ID is required"},{status:400});let l=await a.getUserByEmail(s.user.email);if(!l)return n.xk.json({error:"User not found"},{status:404});if(!await a.getIncidentById(f,l.id))return n.xk.json({error:"Incident not found or access denied"},{status:404});let c=(await a.getIncidentUpdates(f)).map(b=>({...b,posted_by_name:b.posted_by_user?.name,posted_by_email:b.posted_by_user?.email}));return n.xk.json({success:!0,updates:c})}catch(s){return console.error("Error fetching incident updates:",s),n.xk.json({success:!1,error:"Failed to fetch incident updates",details:s.message},{status:500})}}async function y(M,{params:R}){try{let s=await(0,r.I8)();if(!s||!s.user?.email)return n.xk.json({error:"Unauthorized"},{status:401});let{id:f}=R;if(!f)return n.xk.json({error:"Incident ID is required"},{status:400});let{message:l,status:c,update_type:b="update",visible_to_subscribers:E=!0}=await M.json();if(!l)return n.xk.json({error:"Message is required"},{status:400});let I=await a.getUserByEmail(s.user.email);if(!I)return n.xk.json({error:"User not found"},{status:404});let T=await a.getIncidentById(f,I.id);if(!T)return n.xk.json({error:"Incident not found or access denied"},{status:404});let S={incident_id:f,message:l,status:c||T.status,update_type:b,posted_by:I.id,visible_to_subscribers:E},U=await a.createIncidentUpdate(S);return c&&c!==T.status&&await a.updateIncident(f,{status:c,updated_at:new Date().toISOString()}),n.xk.json({success:!0,update:U,message:"Incident update created successfully"},{status:201})}catch(s){return console.error("Error creating incident update:",s),n.xk.json({success:!1,error:"Failed to create incident update",details:s.message},{status:500})}}async function x(M,{params:R}){try{let s=await(0,r.I8)();if(!s||!s.user?.email)return n.xk.json({error:"Unauthorized"},{status:401});let{id:f}=R,{searchParams:l}=new URL(M.url),c=l.get("updateId");if(!f||!c)return n.xk.json({error:"Incident ID and Update ID are required"},{status:400});let b=await M.json(),E=await a.getUserByEmail(s.user.email);if(!E)return n.xk.json({error:"User not found"},{status:404});if(!await a.getIncidentById(f,E.id))return n.xk.json({error:"Incident not found or access denied"},{status:404});let I=await a.updateIncidentUpdate(c,{...b,updated_at:new Date().toISOString()});return n.xk.json({success:!0,update:I,message:"Incident update updated successfully"})}catch(s){return console.error("Error updating incident update:",s),n.xk.json({success:!1,error:"Failed to update incident update",details:s.message},{status:500})}}async function v(M,{params:R}){try{let s=await(0,r.I8)();if(!s||!s.user?.email)return n.xk.json({error:"Unauthorized"},{status:401});let{id:f}=R,{searchParams:l}=new URL(M.url),c=l.get("updateId");if(!f||!c)return n.xk.json({error:"Incident ID and Update ID are required"},{status:400});let b=await a.getUserByEmail(s.user.email);return b?await a.getIncidentById(f,b.id)?(await a.deleteIncidentUpdate(c),n.xk.json({success:!0,message:"Incident update deleted successfully"})):n.xk.json({error:"Incident not found or access denied"},{status:404}):n.xk.json({error:"User not found"},{status:404})}catch(s){return console.error("Error deleting incident update:",s),n.xk.json({success:!1,error:"Failed to delete incident update",details:s.message},{status:500})}}let A=new d.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/incidents/[id]/updates/route",pathname:"/api/incidents/[id]/updates",filename:"route",bundlePath:"app/api/incidents/[id]/updates/route"},resolvedPagePath:"/Users/sean/git/alert24-app/app/api/incidents/[id]/updates/route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:N,staticGenerationAsyncStorage:w,serverHooks:C}=A,K="/api/incidents/[id]/updates/route";function D(){return(0,e.XH)({serverHooks:C,staticGenerationAsyncStorage:w})}let z=h,F=o.a.wrap(A)},6095:oe},$=>{var _=i=>$($.s=i);$.O(0,[2720,7883,1377,3452,6006],()=>_(3849));var u=$.O();(P._ENTRIES=typeof P._ENTRIES>"u"?{}:P._ENTRIES)["middleware_app/api/incidents/[id]/updates/route"]=u}]),function(){let $={exports:{},loaded:!1};return function(u,i){var h=Object.create,o=Object.defineProperty,d=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,e=Object.getPrototypeOf,n=Object.prototype.hasOwnProperty,r=s=>o(s,"__esModule",{value:!0}),a=(s,f)=>{r(s);for(var l in f)o(s,l,{get:f[l],enumerable:!0})},p=(s,f,l)=>{if(f&&typeof f=="object"||typeof f=="function")for(let c of t(f))!n.call(s,c)&&c!=="default"&&o(s,c,{get:()=>f[c],enumerable:!(l=d(f,c))||l.enumerable});return s},m=s=>p(r(o(s!=null?h(e(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);a(i,{default:()=>z});var y=m((W(),ne(q))),x="@next/request-context",v=Symbol.for(x),A=Symbol.for("internal.storage");function N(){let s=P;if(!s[v]){let f=new y.AsyncLocalStorage,l={get:()=>f.getStore(),[A]:f};s[v]=l}return s[v]}var w=N();function C(s,f){return w[A].run(s,f)}function K(s){let f={};return s&&s.forEach((l,c)=>{f[c]=l,c.toLowerCase()==="set-cookie"&&(f[c]=D(l))}),f}function D(s){let f=[],l=0,c,b,E,I,T;function S(){for(;l<s.length&&/\s/.test(s.charAt(l));)l+=1;return l<s.length}function U(){return b=s.charAt(l),b!=="="&&b!==";"&&b!==","}for(;l<s.length;){for(c=l,T=!1;S();)if(b=s.charAt(l),b===","){for(E=l,l+=1,S(),I=l;l<s.length&&U();)l+=1;l<s.length&&s.charAt(l)==="="?(T=!0,l=I,f.push(s.substring(c,E)),c=l):l=E+1}else l+=1;(!T||l>=s.length)&&f.push(s.substring(c,s.length))}return f}function z(s){let f=s.staticRoutes.map(c=>({regexp:new RegExp(c.namedRegex),page:c.page})),l=s.dynamicRoutes?.map(c=>({regexp:new RegExp(c.namedRegex),page:c.page}))||[];return async function(c,b){let E=new URL(c.url).pathname,I={};if(s.nextConfig?.basePath&&E.startsWith(s.nextConfig.basePath)&&(E=E.replace(s.nextConfig.basePath,"")||"/"),s.nextConfig?.i18n)for(let S of s.nextConfig.i18n.locales){let U=new RegExp(`^/${S}($|/)`,"i");if(E.match(U)){E=E.replace(U,"/")||"/";break}}for(let S of f)if(S.regexp.exec(E)){I.name=S.page;break}if(!I.name){let S=M(E);for(let U of l||[]){if(S&&!M(U.page))continue;let X=U.regexp.exec(E);if(X){I={name:U.page,params:X.groups};break}}}let T=await C({waitUntil:b.waitUntil},()=>P._ENTRIES[`middleware_${s.name}`].default.call({},{request:{url:c.url,method:c.method,headers:K(c.headers),ip:F(c.headers,R.Ip),geo:{city:F(c.headers,R.City,!0),country:F(c.headers,R.Country,!0),latitude:F(c.headers,R.Latitude),longitude:F(c.headers,R.Longitude),region:F(c.headers,R.Region,!0)},nextConfig:s.nextConfig,page:I,body:c.body}}));return T.waitUntil&&b.waitUntil(T.waitUntil),T.response}}function F(s,f,l=!1){let c=s.get(f)||void 0;return l&&c?decodeURIComponent(c):c}function M(s){return s==="/api"||s.startsWith("/api/")}var R;(function(s){s.City="x-vercel-ip-city",s.Country="x-vercel-ip-country",s.Ip="x-real-ip",s.Latitude="x-vercel-ip-latitude",s.Longitude="x-vercel-ip-longitude",s.Region="x-vercel-ip-country-region"})(R||(R={}))}($,$.exports),$.exports}.call({}).default({name:"app/api/incidents/[id]/updates/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/accept-invitation",regex:"^/accept\\-invitation(?:/)?$",routeKeys:{},namedRegex:"^/accept\\-invitation(?:/)?$"},{page:"/debug-email",regex:"^/debug\\-email(?:/)?$",routeKeys:{},namedRegex:"^/debug\\-email(?:/)?$"},{page:"/debug-monitoring",regex:"^/debug\\-monitoring(?:/)?$",routeKeys:{},namedRegex:"^/debug\\-monitoring(?:/)?$"},{page:"/escalation-policies/new",regex:"^/escalation\\-policies/new(?:/)?$",routeKeys:{},namedRegex:"^/escalation\\-policies/new(?:/)?$"},{page:"/favicon.ico",regex:"^/favicon\\.ico(?:/)?$",routeKeys:{},namedRegex:"^/favicon\\.ico(?:/)?$"},{page:"/help",regex:"^/help(?:/)?$",routeKeys:{},namedRegex:"^/help(?:/)?$"},{page:"/incidents",regex:"^/incidents(?:/)?$",routeKeys:{},namedRegex:"^/incidents(?:/)?$"},{page:"/incidents/new",regex:"^/incidents/new(?:/)?$",routeKeys:{},namedRegex:"^/incidents/new(?:/)?$"},{page:"/monitoring",regex:"^/monitoring(?:/)?$",routeKeys:{},namedRegex:"^/monitoring(?:/)?$"},{page:"/monitoring/new",regex:"^/monitoring/new(?:/)?$",routeKeys:{},namedRegex:"^/monitoring/new(?:/)?$"},{page:"/on-call",regex:"^/on\\-call(?:/)?$",routeKeys:{},namedRegex:"^/on\\-call(?:/)?$"},{page:"/on-call/new",regex:"^/on\\-call/new(?:/)?$",routeKeys:{},namedRegex:"^/on\\-call/new(?:/)?$"},{page:"/organizations",regex:"^/organizations(?:/)?$",routeKeys:{},namedRegex:"^/organizations(?:/)?$"},{page:"/profile",regex:"^/profile(?:/)?$",routeKeys:{},namedRegex:"^/profile(?:/)?$"},{page:"/settings",regex:"^/settings(?:/)?$",routeKeys:{},namedRegex:"^/settings(?:/)?$"},{page:"/status-pages",regex:"^/status\\-pages(?:/)?$",routeKeys:{},namedRegex:"^/status\\-pages(?:/)?$"}],dynamicRoutes:[{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"},{page:"/api/incidents/[id]",regex:"^/api/incidents/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/incidents/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/incidents/[id]/updates",regex:"^/api/incidents/([^/]+?)/updates(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/incidents/(?<nxtPid>[^/]+?)/updates(?:/)?$"},{page:"/api/monitoring/[id]",regex:"^/api/monitoring/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/monitoring/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/on-call-schedules/[id]",regex:"^/api/on\\-call\\-schedules/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/on\\-call\\-schedules/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/organizations/[id]",regex:"^/api/organizations/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/organizations/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/organizations/[id]/invitations",regex:"^/api/organizations/([^/]+?)/invitations(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/organizations/(?<nxtPid>[^/]+?)/invitations(?:/)?$"},{page:"/api/services/[id]",regex:"^/api/services/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/services/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/services/[id]/monitoring",regex:"^/api/services/([^/]+?)/monitoring(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/services/(?<nxtPid>[^/]+?)/monitoring(?:/)?$"},{page:"/api/services/[id]/sla",regex:"^/api/services/([^/]+?)/sla(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/services/(?<nxtPid>[^/]+?)/sla(?:/)?$"},{page:"/api/status-pages/public/[slug]",regex:"^/api/status\\-pages/public/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/api/status\\-pages/public/(?<nxtPslug>[^/]+?)(?:/)?$"},{page:"/api/status-pages/[id]",regex:"^/api/status\\-pages/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/status\\-pages/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/incidents/[id]",regex:"^/incidents/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/incidents/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/incidents/[id]/edit",regex:"^/incidents/([^/]+?)/edit(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/incidents/(?<nxtPid>[^/]+?)/edit(?:/)?$"},{page:"/monitoring/edit/[id]",regex:"^/monitoring/edit/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/monitoring/edit/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/on-call/[id]/edit",regex:"^/on\\-call/([^/]+?)/edit(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/on\\-call/(?<nxtPid>[^/]+?)/edit(?:/)?$"},{page:"/status/[slug]",regex:"^/status/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/status/(?<nxtPslug>[^/]+?)(?:/)?$"}],nextConfig:{basePath:""}})))(j,j,j);export{St as default};
