var te=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var ae=Object.getOwnPropertyNames;var ie=Object.prototype.hasOwnProperty;var oe=(v,N)=>()=>(v&&(N=v(v=0)),N);var Q=(v,N,H,T)=>{if(N&&typeof N=="object"||typeof N=="function")for(let f of ae(N))!ie.call(v,f)&&f!==H&&te(v,f,{get:()=>N[f],enumerable:!(T=ne(N,f))||T.enumerable});return v},V=(v,N,H)=>(Q(v,N,"default"),H&&Q(H,N,"default"));var ce=v=>Q(te({},"__esModule",{value:!0}),v);var J={};import*as Kt from"async_hooks";var se=oe(()=>{V(J,Kt)});import{__getNamedExports as ue}from"../../../../__next-on-pages-dist__/webpack/5856.js";import{__getNamedExports as le}from"../../../../__next-on-pages-dist__/webpack/aa5c0a3237ae1fd635b2d0bab25b6e94.js";import{__getNamedExports as _e}from"../../../../__next-on-pages-dist__/webpack/ac7e0cd817c0f96ac6506045b651299a.js";import{__getNamedExports as he}from"../../../../__next-on-pages-dist__/webpack/5c7c089f9b18fab21905bdbf6a451f6c.js";import{__getNamedExports as de}from"../../../../__next-on-pages-dist__/webpack/fc1dd92f63cefab5577162dd844679df.js";import{__getNamedExports as pe}from"../../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var A=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/monitoring/scheduler"),ge=ue(A,A,A),me=ge.__chunk_5856,Y=le(A,A,A),fe=Y.__chunk_6095,ke=Y.__chunk_3543,xe=Y.__chunk_2641,k=_e(A,A,A),ye=k.__chunk_6195,$e=k.__chunk_2067,Pe=k.__chunk_9182,ve=k.__chunk_8983,we=k.__chunk_5228,be=k.__chunk_2296,Ee=k.__chunk_2594,Oe=k.__chunk_6735,je=k.__chunk_8219,Ne=k.__chunk_5577,Te=k.__chunk_9254,Ae=k.__chunk_9206,Re=k.__chunk_989,Se=k.__chunk_1863,Ce=k.__chunk_3039,De=k.__chunk_335,Me=k.__chunk_8042,Ie=k.__chunk_7765,Ke=k.__chunk_6991,Fe=k.__chunk_8816,ze=k.__chunk_6631,Le=k.__chunk_4828,Be=k.__chunk_4834,Ue=k.__chunk_828,qe=k.__chunk_5927,He=k.__chunk_8439,Ge=k.__chunk_4363,Je=k.__chunk_2039,Xe=k.__chunk_8264,We=k.__chunk_1583,Qe=k.__chunk_7908,Ve=k.__chunk_8949,Ye=k.__chunk_796,Ze=k.__chunk_1651,et=k.__chunk_5105,tt=k.__chunk_9642,st=k.__chunk_5028,rt=k.__chunk_9548,nt=k.__chunk_6914,at=k.__chunk_7960,it=k.__chunk_4337,ot=k.__chunk_8819,q=he(A,A,A),ct=q.__chunk_6006,ut=q.__chunk_9985,lt=q.__chunk_4155,_t=q.__chunk_9037,ht=q.__chunk_5737,dt=q.__chunk_4919,pt=q.__chunk_6855,gt=q.__chunk_3607,S=de(A,A,A),mt=S.__chunk_1730,ft=S.__chunk_3818,kt=S.__chunk_7037,xt=S.__chunk_9573,yt=S.__chunk_7701,$t=S.__chunk_662,Pt=S.__chunk_4101,vt=S.__chunk_6776,wt=S.__chunk_3665,bt=S.__chunk_7444,Et=S.__chunk_4591,Ot=S.__chunk_7983,jt=S.__chunk_581,Nt=S.__chunk_2561,Tt=S.__chunk_2988,At=S.__chunk_6947,Rt=S.__chunk_5996,St=S.__chunk_676,re=pe(A,A,A),Ct=re.__NEXT_FONT_MANIFEST,Dt=re.__REACT_LOADABLE_MANIFEST,Ht=((v,N,H)=>(N._ENTRIES={},v.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-ba48b7ef278912ed.js","static/chunks/fd9d1056-30de07f4a3c346ee.js","static/chunks/7466-8fdf295a7c02cf2e.js","static/chunks/main-app-8eaf6dc4ad0df15d.js"],pages:{"/_app":["static/chunks/webpack-ba48b7ef278912ed.js","static/chunks/framework-8e0e0f4a6b83a956.js","static/chunks/main-17007a384daea84e.js","static/chunks/pages/_app-3c9ca398d360b709.js"],"/_error":["static/chunks/webpack-ba48b7ef278912ed.js","static/chunks/framework-8e0e0f4a6b83a956.js","static/chunks/main-17007a384daea84e.js","static/chunks/pages/_error-cf5ca766ac8f493f.js"]},ampFirstPages:[]},v.__BUILD_MANIFEST.lowPriorityFiles=["/static/5vAXtrh2qjJDoCjPjRb93/_buildManifest.js",,"/static/5vAXtrh2qjJDoCjPjRb93/_ssgManifest.js"],v.__REACT_LOADABLE_MANIFEST=Dt,v.__NEXT_FONT_MANIFEST=Ct,v.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var T={},f={};function i(n){var g=f[n];if(g!==void 0)return g.exports;var c=f[n]={exports:{}},m=!0;try{T[n].call(c.exports,c,c.exports,i),m=!1}finally{m&&delete f[n]}return c.exports}i.m=T,i.amdO={},(()=>{var n=[];i.O=(g,c,m,t)=>{if(c){t=t||0;for(var e=n.length;e>0&&n[e-1][2]>t;e--)n[e]=n[e-1];n[e]=[c,m,t];return}for(var s=1/0,e=0;e<n.length;e++){for(var[c,m,t]=n[e],r=!0,l=0;l<c.length;l++)s>=t&&Object.keys(i.O).every(M=>i.O[M](c[l]))?c.splice(l--,1):(r=!1,t<s&&(s=t));if(r){n.splice(e--,1);var _=m();_!==void 0&&(g=_)}}return g}})(),i.n=n=>{var g=n&&n.__esModule?()=>n.default:()=>n;return i.d(g,{a:g}),g},(()=>{var n,g=Object.getPrototypeOf?c=>Object.getPrototypeOf(c):c=>c.__proto__;i.t=function(c,m){if(1&m&&(c=this(c)),8&m||typeof c=="object"&&c&&(4&m&&c.__esModule||16&m&&typeof c.then=="function"))return c;var t=Object.create(null);i.r(t);var e={};n=n||[null,g({}),g([]),g(g)];for(var s=2&m&&c;typeof s=="object"&&!~n.indexOf(s);s=g(s))Object.getOwnPropertyNames(s).forEach(r=>e[r]=()=>c[r]);return e.default=()=>c,i.d(t,e),t}})(),i.d=(n,g)=>{for(var c in g)i.o(g,c)&&!i.o(n,c)&&Object.defineProperty(n,c,{enumerable:!0,get:g[c]})},i.e=()=>Promise.resolve(),i.g=function(){if(typeof N=="object")return N;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(n,g)=>Object.prototype.hasOwnProperty.call(n,g),i.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},(()=>{var n={5993:0};i.O.j=m=>n[m]===0;var g=(m,t)=>{var e,s,[r,l,_]=t,P=0;if(r.some(E=>n[E]!==0)){for(e in l)i.o(l,e)&&(i.m[e]=l[e]);if(_)var O=_(i)}for(m&&m(t);P<r.length;P++)s=r[P],i.o(n,s)&&n[s]&&n[s][0](),n[s]=0;return i.O(O)},c=v.webpackChunk_N_E=v.webpackChunk_N_E||[];c.forEach(g.bind(null,0)),c.push=g.bind(null,c.push.bind(c))})()})(),(v.webpackChunk_N_E=v.webpackChunk_N_E||[]).push([[2720],{8819:ot,4337:it,7960:at,6914:nt,9548:rt,5028:st,9642:tt,5105:et,1651:Ze,796:Ye,8949:Ve,7908:Qe,1583:We,8264:Xe,2039:Je,4363:Ge,8439:He,5927:qe,828:Ue,4834:Be,4828:Le,6631:ze,8816:Fe,6991:Ke,7765:Ie,8042:Me,335:De,3039:Ce,1863:Se,989:Re,9206:Ae,9254:Te,5577:Ne,8219:je,6735:Oe,2594:Ee,2296:be,5228:we,8983:ve,9182:Pe}]),(v.webpackChunk_N_E=v.webpackChunk_N_E||[]).push([[7883],{676:St,5996:Rt,6947:At,2988:Tt,2561:Nt,581:jt,7983:Ot,4591:Et,7444:bt,3665:wt,6776:vt,4101:Pt,662:$t,7701:yt,9573:xt,7037:kt,3818:ft,1730:mt}]),(v.webpackChunk_N_E=v.webpackChunk_N_E||[]).push([[1377],{3607:gt,4953:function(T,f,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(f,"__esModule",{value:!0});let g=n(i(3607)),c=n(i(6855));class m{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=g.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var _,P,O;let E=null,R=null,M=null,D=l.status,C=l.statusText;if(l.ok){if(this.method!=="HEAD"){let U=await l.text();U===""||(R=this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?U:JSON.parse(U))}let L=(_=this.headers.Prefer)===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),B=(P=l.headers.get("content-range"))===null||P===void 0?void 0:P.split("/");L&&B&&B.length>1&&(M=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(R)&&(R.length>1?(E={code:"PGRST116",details:`Results contain ${R.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,M=null,D=406,C="Not Acceptable"):R=R.length===1?R[0]:null)}else{let L=await l.text();try{E=JSON.parse(L),Array.isArray(E)&&l.status===404&&(R=[],E=null,D=200,C="OK")}catch{l.status===404&&L===""?(D=204,C="No Content"):E={message:L}}if(E&&this.isMaybeSingle&&((O=E?.details)===null||O===void 0?void 0:O.includes("0 rows"))&&(E=null,D=200,C="OK"),E&&this.shouldThrowOnError)throw new c.default(E)}return{error:E,data:R,count:M,status:D,statusText:C}});return this.shouldThrowOnError||(r=r.catch(l=>{var _,P,O;return{error:{message:`${(_=l?.name)!==null&&_!==void 0?_:"FetchError"}: ${l?.message}`,details:`${(P=l?.stack)!==null&&P!==void 0?P:""}`,hint:"",code:`${(O=l?.code)!==null&&O!==void 0?O:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}}f.default=m},4708:function(T,f,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(f,"__esModule",{value:!0});let g=n(i(3449)),c=n(i(5245)),m=i(4919);class t{constructor(s,{headers:r={},schema:l,fetch:_}={}){this.url=s,this.headers=Object.assign(Object.assign({},m.DEFAULT_HEADERS),r),this.schemaName=l,this.fetch=_}from(s){let r=new URL(`${this.url}/${s}`);return new g.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new t(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,r={},{head:l=!1,get:_=!1,count:P}={}){let O,E,R=new URL(`${this.url}/rpc/${s}`);l||_?(O=l?"HEAD":"GET",Object.entries(r).filter(([D,C])=>C!==void 0).map(([D,C])=>[D,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([D,C])=>{R.searchParams.append(D,C)})):(O="POST",E=r);let M=Object.assign({},this.headers);return P&&(M.Prefer=`count=${P}`),new c.default({method:O,url:R,headers:M,schema:this.schemaName,body:E,fetch:this.fetch,allowEmpty:!1})}}f.default=t},6855:pt,5245:function(T,f,i){"use strict";var n=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(f,"__esModule",{value:!0});let g=n(i(1560));class c extends g.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let s=Array.from(new Set(e)).map(r=>typeof r=="string"&&RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:s,type:r}={}){let l="";r==="plain"?l="pl":r==="phrase"?l="ph":r==="websearch"&&(l="w");let _=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${l}fts${_}.${e}`),this}match(t){return Object.entries(t).forEach(([e,s])=>{this.url.searchParams.append(e,`eq.${s}`)}),this}not(t,e,s){return this.url.searchParams.append(t,`not.${e}.${s}`),this}or(t,{foreignTable:e,referencedTable:s=e}={}){let r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,s){return this.url.searchParams.append(t,`${e}.${s}`),this}}f.default=c},3449:function(T,f,i){"use strict";var n=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(f,"__esModule",{value:!0});let g=n(i(5245));class c{constructor(t,{headers:e={},schema:s,fetch:r}){this.url=t,this.headers=e,this.schema=s,this.fetch=r}select(t,{head:e=!1,count:s}={}){let r=!1,l=(t??"*").split("").map(_=>/\s/.test(_)&&!r?"":(_==='"'&&(r=!r),_)).join("");return this.url.searchParams.set("select",l),s&&(this.headers.Prefer=`count=${s}`),new g.default({method:e?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:s=!0}={}){let r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),s||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(t)){let l=t.reduce((_,P)=>_.concat(Object.keys(P)),[]);if(l.length>0){let _=[...new Set(l)].map(P=>`"${P}"`);this.url.searchParams.set("columns",_.join(","))}}return new g.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:s=!1,count:r,defaultToNull:l=!0}={}){let _=[`resolution=${s?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&_.push(this.headers.Prefer),r&&_.push(`count=${r}`),l||_.push("missing=default"),this.headers.Prefer=_.join(","),Array.isArray(t)){let P=t.reduce((O,E)=>O.concat(Object.keys(E)),[]);if(P.length>0){let O=[...new Set(P)].map(E=>`"${E}"`);this.url.searchParams.set("columns",O.join(","))}}return new g.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),this.headers.Prefer=s.join(","),new g.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e=[];return t&&e.push(`count=${t}`),this.headers.Prefer&&e.unshift(this.headers.Prefer),this.headers.Prefer=e.join(","),new g.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}f.default=c},1560:function(T,f,i){"use strict";var n=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(f,"__esModule",{value:!0});let g=n(i(4953));class c extends g.default{select(t){let e=!1,s=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:s,foreignTable:r,referencedTable:l=r}={}){let _=l?`${l}.order`:"order",P=this.url.searchParams.get(_);return this.url.searchParams.set(_,`${P?`${P},`:""}${t}.${e?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:s=e}={}){let r=s===void 0?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:s,referencedTable:r=s}={}){let l=r===void 0?"offset":`${r}.offset`,_=r===void 0?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${t}`),this.url.searchParams.set(_,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:s=!1,buffers:r=!1,wal:l=!1,format:_="text"}={}){var P;let O=[t?"analyze":null,e?"verbose":null,s?"settings":null,r?"buffers":null,l?"wal":null].filter(Boolean).join("|"),E=(P=this.headers.Accept)!==null&&P!==void 0?P:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${_}; for="${E}"; options=${O};`,this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}f.default=c},4919:dt,7483:function(T,f,i){"use strict";var n=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(f,"__esModule",{value:!0}),f.PostgrestError=f.PostgrestBuilder=f.PostgrestTransformBuilder=f.PostgrestFilterBuilder=f.PostgrestQueryBuilder=f.PostgrestClient=void 0;let g=n(i(4708));f.PostgrestClient=g.default;let c=n(i(3449));f.PostgrestQueryBuilder=c.default;let m=n(i(5245));f.PostgrestFilterBuilder=m.default;let t=n(i(1560));f.PostgrestTransformBuilder=t.default;let e=n(i(4953));f.PostgrestBuilder=e.default;let s=n(i(6855));f.PostgrestError=s.default,f.default={PostgrestClient:g.default,PostgrestQueryBuilder:c.default,PostgrestFilterBuilder:m.default,PostgrestTransformBuilder:t.default,PostgrestBuilder:e.default,PostgrestError:s.default}},5737:ht,9037:_t,4155:lt,9985:ut}]),(v.webpackChunk_N_E=v.webpackChunk_N_E||[]).push([[3452],{2641:xe,3543:ke}]),(v.webpackChunk_N_E=v.webpackChunk_N_E||[]).push([[6006],{6006:ct}]),(v.webpackChunk_N_E=v.webpackChunk_N_E||[]).push([[8312],{2067:$e,6195:ye,1585:(T,f,i)=>{"use strict";i.r(f),i.d(f,{ComponentMod:()=>x,default:()=>K});var n={};i.r(n),i.d(n,{GET:()=>D,runtime:()=>P});var g={};i.r(g),i.d(g,{originalPathname:()=>b,patchFetch:()=>y,requestAsyncStorage:()=>X,routeModule:()=>z,serverHooks:()=>a,staticGenerationAsyncStorage:()=>I});var c=i(7983),m=i(2561),t=i(4828),e=i(6631),s=i(9985);i(6095);var r=i(6006),l=i(5856);let _=new r._,P="edge";async function O(u,h){try{let d=JSON.parse(u.description).linked_service_id;if(!d)return;let{data:o,error:p}=await _.client.from("services").select("*").eq("id",d).not("name","ilike","[[]MONITORING]%").single();if(p||!o){console.warn(`Linked service ${d} not found or not accessible`);return}let $="operational";if(h.is_successful||(h.status_code>=500?$="down":(h.status_code>=400||h.response_time_ms,$="degraded")),o.status!==$){let{error:w}=await _.client.from("services").update({status:$,updated_at:new Date().toISOString()}).eq("id",d);if(!w)return console.log(`\u{1F517} Updated linked service ${o.name}: ${o.status} \u2192 ${$}`),{oldStatus:o.status,newStatus:$,serviceName:o.name};console.error("Error updating linked service status:",w)}}catch(d){console.error("Error updating linked service status:",d)}return null}async function E(u){try{let h=JSON.parse(u.description),d=(await _.getIncidentsByOrganization(h.organization_id)).find(o=>o.source==="monitoring"&&o.status!=="resolved"&&o.affected_services?.includes(u.id));if(d){let o={status:"resolved",resolved_at:new Date().toISOString()};return await _.updateIncident(d.id,o),console.log(`\u2705 Auto-resolved incident ${d.id} - check ${u.name} recovered`),d}}catch(h){console.error("Error resolving incident for recovery:",h)}return null}async function R(u,h){try{let d=JSON.parse(u.description);if(!await _.getOrganizationById(d.organization_id))return console.error("Organization not found for check:",u.id),null;let o=(await _.getIncidentsByOrganization(d.organization_id)).find(j=>j.source==="monitoring"&&j.status!=="resolved"&&j.affected_services?.includes(u.id));if(o)return console.log(`Incident already exists for check ${u.name}: ${o.id}`),o;let p="medium";d.check_type==="http"&&h.status_code>=500||h.response_time_ms>1e4?p="high":d.check_type==="ssl"&&h.error_message?.includes("expired")&&(p="critical");let $={organization_id:d.organization_id,title:`Service Down: ${u.name}`,description:`Monitoring check "${d.name||u.name}" has failed.

Error: ${h.error_message}

Check URL: ${d.url||d.target_url}
Response Time: ${h.response_time_ms}ms
${h.status_code?`Status Code: ${h.status_code}`:""}`,severity:p,status:"investigating",affected_services:[u.id],impact_description:`Service "${u.name}" is currently unavailable or experiencing issues.`,source:"monitoring",created_by:null},w=await _.createIncident($);return console.log(`\u{1F4CB} Auto-created incident ${w.id} for failed check: ${u.name}`),w}catch(d){return console.error("Error creating incident for failure:",d),null}}async function M(u,h){try{let d=JSON.parse(u.description),o=await _.getOrganizationById(d.organization_id);if(!o){console.error("Organization not found for check:",u.id);return}for(let p of(await _.getOrganizationMembersByOrganization(d.organization_id)).filter($=>["admin","owner","responder"].includes($.role)&&$.email_notifications_enabled!==!1))try{await l.y.sendMonitoringAlert({toEmail:p.users?.email||p.email,toName:p.users?.name||p.name,organizationName:o.name,serviceName:u.name,checkName:d.name||u.name,alertType:"down",errorMessage:h.error_message,responseTime:h.response_time_ms,organizationBranding:{name:o.name,logoUrl:o.logo_url}}),console.log(`\u{1F4E7} Failure notification sent to ${p.users?.email||p.email}`)}catch($){console.error(`Failed to send notification to ${p.users?.email||p.email}:`,$)}}catch(d){console.error("Error sending failure notifications:",d)}}async function D(u){if(u.headers.get("authorization")!==`Bearer ${process.env.CRON_SECRET}`)return s.xk.json({error:"Unauthorized"},{status:401});try{let h=[],d=await _.getPendingMonitoringChecks(50);for(let o of(console.log(`Found ${d.length} pending monitoring checks`),d))try{let p=(await _.getCheckResults(o.id,1))[0],$=!1;if(p){let w=new Date(p.created_at),j=o.check_interval_minutes||5,F=new Date(w.getTime()+6e4*j);$=new Date>=F}else $=!0;if($){console.log(`Executing check: ${o.name} (${o.id})`);let w=await C(o);await _.createCheckResult({monitoring_check_id:o.id,is_successful:w.is_successful,response_time:w.response_time,status_code:w.status_code,error_message:w.error_message,response_body:w.response_body});let j=await O(o,w);if(h.push({check_id:o.id,check_name:o.name,success:w.is_successful,response_time:w.response_time,error:w.error_message,linked_service_updated:j?{service_name:j.serviceName,old_status:j.oldStatus,new_status:j.newStatus}:null}),w.is_successful){let F=await E(o);F&&(h[h.length-1].incident_resolved=F.id,console.log(`\u2705 Check recovered: ${o.name}`))}else{console.log(`Check failed: ${o.name} - ${w.error_message}`);let F=await R(o,w);await M(o,w),F&&(h[h.length-1].incident_created=F.id)}}else console.log(`Skipping check: ${o.name} (not due yet)`)}catch(p){console.error(`Error executing check ${o.id}:`,p),h.push({check_id:o.id,check_name:o.name,success:!1,error:p.message})}return s.xk.json({success:!0,message:`Processed ${d.length} monitoring checks`,results:h,execution_time:new Date().toISOString()})}catch(h){return console.error("Monitoring scheduler error:",h),s.xk.json({success:!1,error:"Failed to execute monitoring scheduler",details:h.message},{status:500})}}async function C(u){let h=Date.now();try{if(u.check_type==="http"||u.check_type==="https")return await L(u);if(u.check_type==="ping")return await B(u);if(u.check_type==="tcp")return await U(u);if(u.check_type==="ssl")return await W(u);throw Error(`Unsupported check type: ${u.check_type}`)}catch(d){return{is_successful:!1,response_time:Date.now()-h,status_code:null,error_message:d.message,response_body:null}}}async function L(u){let{target_url:h,timeout_seconds:d,expected_response_code:o}=u,p=Date.now();try{let $=new AbortController,w=setTimeout(()=>$.abort(),1e3*(d||30)),j=await fetch(h,{method:"GET",headers:{"User-Agent":"Alert24-Monitor/1.0"},signal:$.signal});clearTimeout(w);let F=Date.now()-p,G=j.status,Z=G===(o||200),ee="";try{ee=await j.text()}catch{}return{is_successful:Z,response_time:F,status_code:G,error_message:Z?null:`HTTP ${G}`,response_body:ee.substring(0,1e3)}}catch($){return{is_successful:!1,response_time:Date.now()-p,status_code:null,error_message:$.message,response_body:null}}}async function B(u){let{target_url:h,timeout_seconds:d}=u,o=Date.now();try{let p=h;h.includes("://")&&(p=new URL(h).hostname);let $=new AbortController,w=setTimeout(()=>$.abort(),1e3*(d||30)),j=await fetch(`http://${p}`,{method:"HEAD",signal:$.signal});return clearTimeout(w),{is_successful:!0,response_time:Date.now()-o,status_code:j.status,error_message:null,response_body:null}}catch(p){return{is_successful:!1,response_time:Date.now()-o,status_code:null,error_message:p.message,response_body:null}}}async function U(u){let{target_url:h,timeout_seconds:d}=u,o=Date.now();try{let p=h.split(":");if(p.length!==2)return{is_successful:!1,response_time:Date.now()-o,status_code:null,error_message:"TCP check requires hostname:port format",response_body:null};let $=p[0],w=parseInt(p[1]),j=new AbortController,F=setTimeout(()=>j.abort(),1e3*(d||30)),G=await fetch(`http://${$}:${w}`,{method:"HEAD",signal:j.signal});return clearTimeout(F),{is_successful:!0,response_time:Date.now()-o,status_code:G.status,error_message:null,response_body:null}}catch(p){return{is_successful:!1,response_time:Date.now()-o,status_code:null,error_message:`TCP connection failed - ${p.message}`,response_body:null}}}async function W(u){let{target_url:h,timeout_seconds:d}=u,o=Date.now();try{let p=h;p.startsWith("https://")||(p=`https://${h}`);let $=new AbortController,w=setTimeout(()=>$.abort(),1e3*(d||30)),j=await fetch(p,{method:"HEAD",signal:$.signal});return clearTimeout(w),{is_successful:j.status<500,response_time:Date.now()-o,status_code:j.status,error_message:j.status<500?null:`SSL check failed with status ${j.status}`,response_body:null}}catch(p){return{is_successful:!1,response_time:Date.now()-o,status_code:null,error_message:`SSL check failed - ${p.message}`,response_body:null}}}let z=new m.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/monitoring/scheduler/route",pathname:"/api/monitoring/scheduler",filename:"route",bundlePath:"app/api/monitoring/scheduler/route"},resolvedPagePath:"/Users/sean/git/alert24-app/app/api/monitoring/scheduler/route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:X,staticGenerationAsyncStorage:I,serverHooks:a}=z,b="/api/monitoring/scheduler/route";function y(){return(0,e.XH)({serverHooks:a,staticGenerationAsyncStorage:I})}let x=g,K=c.a.wrap(z)},6095:fe,5856:me},T=>{var f=n=>T(T.s=n);T.O(0,[2720,7883,1377,3452,6006],()=>f(1585));var i=T.O();(N._ENTRIES=typeof N._ENTRIES>"u"?{}:N._ENTRIES)["middleware_app/api/monitoring/scheduler/route"]=i}]),function(){let T={exports:{},loaded:!1};return function(i,n){var g=Object.create,c=Object.defineProperty,m=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,e=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,r=a=>c(a,"__esModule",{value:!0}),l=(a,b)=>{r(a);for(var y in b)c(a,y,{get:b[y],enumerable:!0})},_=(a,b,y)=>{if(b&&typeof b=="object"||typeof b=="function")for(let x of t(b))!s.call(a,x)&&x!=="default"&&c(a,x,{get:()=>b[x],enumerable:!(y=m(b,x))||y.enumerable});return a},P=a=>_(r(c(a!=null?g(e(a)):{},"default",a&&a.__esModule&&"default"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);l(n,{default:()=>W});var O=P((se(),ce(J))),E="@next/request-context",R=Symbol.for(E),M=Symbol.for("internal.storage");function D(){let a=N;if(!a[R]){let b=new O.AsyncLocalStorage,y={get:()=>b.getStore(),[M]:b};a[R]=y}return a[R]}var C=D();function L(a,b){return C[M].run(a,b)}function B(a){let b={};return a&&a.forEach((y,x)=>{b[x]=y,x.toLowerCase()==="set-cookie"&&(b[x]=U(y))}),b}function U(a){let b=[],y=0,x,K,u,h,d;function o(){for(;y<a.length&&/\s/.test(a.charAt(y));)y+=1;return y<a.length}function p(){return K=a.charAt(y),K!=="="&&K!==";"&&K!==","}for(;y<a.length;){for(x=y,d=!1;o();)if(K=a.charAt(y),K===","){for(u=y,y+=1,o(),h=y;y<a.length&&p();)y+=1;y<a.length&&a.charAt(y)==="="?(d=!0,y=h,b.push(a.substring(x,u)),x=y):y=u+1}else y+=1;(!d||y>=a.length)&&b.push(a.substring(x,a.length))}return b}function W(a){let b=a.staticRoutes.map(x=>({regexp:new RegExp(x.namedRegex),page:x.page})),y=a.dynamicRoutes?.map(x=>({regexp:new RegExp(x.namedRegex),page:x.page}))||[];return async function(x,K){let u=new URL(x.url).pathname,h={};if(a.nextConfig?.basePath&&u.startsWith(a.nextConfig.basePath)&&(u=u.replace(a.nextConfig.basePath,"")||"/"),a.nextConfig?.i18n)for(let o of a.nextConfig.i18n.locales){let p=new RegExp(`^/${o}($|/)`,"i");if(u.match(p)){u=u.replace(p,"/")||"/";break}}for(let o of b)if(o.regexp.exec(u)){h.name=o.page;break}if(!h.name){let o=X(u);for(let p of y||[]){if(o&&!X(p.page))continue;let $=p.regexp.exec(u);if($){h={name:p.page,params:$.groups};break}}}let d=await L({waitUntil:K.waitUntil},()=>N._ENTRIES[`middleware_${a.name}`].default.call({},{request:{url:x.url,method:x.method,headers:B(x.headers),ip:z(x.headers,I.Ip),geo:{city:z(x.headers,I.City,!0),country:z(x.headers,I.Country,!0),latitude:z(x.headers,I.Latitude),longitude:z(x.headers,I.Longitude),region:z(x.headers,I.Region,!0)},nextConfig:a.nextConfig,page:h,body:x.body}}));return d.waitUntil&&K.waitUntil(d.waitUntil),d.response}}function z(a,b,y=!1){let x=a.get(b)||void 0;return y&&x?decodeURIComponent(x):x}function X(a){return a==="/api"||a.startsWith("/api/")}var I;(function(a){a.City="x-vercel-ip-city",a.Country="x-vercel-ip-country",a.Ip="x-real-ip",a.Latitude="x-vercel-ip-latitude",a.Longitude="x-vercel-ip-longitude",a.Region="x-vercel-ip-country-region"})(I||(I={}))}(T,T.exports),T.exports}.call({}).default({name:"app/api/monitoring/scheduler/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/accept-invitation",regex:"^/accept\\-invitation(?:/)?$",routeKeys:{},namedRegex:"^/accept\\-invitation(?:/)?$"},{page:"/debug-email",regex:"^/debug\\-email(?:/)?$",routeKeys:{},namedRegex:"^/debug\\-email(?:/)?$"},{page:"/debug-monitoring",regex:"^/debug\\-monitoring(?:/)?$",routeKeys:{},namedRegex:"^/debug\\-monitoring(?:/)?$"},{page:"/escalation-policies/new",regex:"^/escalation\\-policies/new(?:/)?$",routeKeys:{},namedRegex:"^/escalation\\-policies/new(?:/)?$"},{page:"/favicon.ico",regex:"^/favicon\\.ico(?:/)?$",routeKeys:{},namedRegex:"^/favicon\\.ico(?:/)?$"},{page:"/help",regex:"^/help(?:/)?$",routeKeys:{},namedRegex:"^/help(?:/)?$"},{page:"/incidents",regex:"^/incidents(?:/)?$",routeKeys:{},namedRegex:"^/incidents(?:/)?$"},{page:"/incidents/new",regex:"^/incidents/new(?:/)?$",routeKeys:{},namedRegex:"^/incidents/new(?:/)?$"},{page:"/monitoring",regex:"^/monitoring(?:/)?$",routeKeys:{},namedRegex:"^/monitoring(?:/)?$"},{page:"/monitoring/new",regex:"^/monitoring/new(?:/)?$",routeKeys:{},namedRegex:"^/monitoring/new(?:/)?$"},{page:"/on-call",regex:"^/on\\-call(?:/)?$",routeKeys:{},namedRegex:"^/on\\-call(?:/)?$"},{page:"/on-call/new",regex:"^/on\\-call/new(?:/)?$",routeKeys:{},namedRegex:"^/on\\-call/new(?:/)?$"},{page:"/organizations",regex:"^/organizations(?:/)?$",routeKeys:{},namedRegex:"^/organizations(?:/)?$"},{page:"/profile",regex:"^/profile(?:/)?$",routeKeys:{},namedRegex:"^/profile(?:/)?$"},{page:"/settings",regex:"^/settings(?:/)?$",routeKeys:{},namedRegex:"^/settings(?:/)?$"},{page:"/status-pages",regex:"^/status\\-pages(?:/)?$",routeKeys:{},namedRegex:"^/status\\-pages(?:/)?$"}],dynamicRoutes:[{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"},{page:"/api/incidents/[id]",regex:"^/api/incidents/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/incidents/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/incidents/[id]/updates",regex:"^/api/incidents/([^/]+?)/updates(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/incidents/(?<nxtPid>[^/]+?)/updates(?:/)?$"},{page:"/api/monitoring/[id]",regex:"^/api/monitoring/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/monitoring/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/on-call-schedules/[id]",regex:"^/api/on\\-call\\-schedules/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/on\\-call\\-schedules/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/organizations/[id]",regex:"^/api/organizations/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/organizations/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/organizations/[id]/invitations",regex:"^/api/organizations/([^/]+?)/invitations(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/organizations/(?<nxtPid>[^/]+?)/invitations(?:/)?$"},{page:"/api/services/[id]",regex:"^/api/services/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/services/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/services/[id]/monitoring",regex:"^/api/services/([^/]+?)/monitoring(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/services/(?<nxtPid>[^/]+?)/monitoring(?:/)?$"},{page:"/api/services/[id]/sla",regex:"^/api/services/([^/]+?)/sla(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/services/(?<nxtPid>[^/]+?)/sla(?:/)?$"},{page:"/api/status-pages/public/[slug]",regex:"^/api/status\\-pages/public/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/api/status\\-pages/public/(?<nxtPslug>[^/]+?)(?:/)?$"},{page:"/api/status-pages/[id]",regex:"^/api/status\\-pages/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/status\\-pages/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/incidents/[id]",regex:"^/incidents/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/incidents/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/incidents/[id]/edit",regex:"^/incidents/([^/]+?)/edit(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/incidents/(?<nxtPid>[^/]+?)/edit(?:/)?$"},{page:"/monitoring/edit/[id]",regex:"^/monitoring/edit/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/monitoring/edit/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/on-call/[id]/edit",regex:"^/on\\-call/([^/]+?)/edit(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/on\\-call/(?<nxtPid>[^/]+?)/edit(?:/)?$"},{page:"/status/[slug]",regex:"^/status/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/status/(?<nxtPslug>[^/]+?)(?:/)?$"}],nextConfig:{basePath:""}})))(A,A,A);export{Ht as default};
